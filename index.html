<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>The J. T. Baldwin Tour</title>
  <link rel="icon" type="image/x-icon" href="./Pictures/favicon.ico">

  <style>
    /* ========== Basic page layout ========== */
    :root{
      --bg: #0B3728;           /* dark page background */
      --panel-bg: rgba(255,255,255,0.06);
      --panel-border: rgba(255,255,255,0.12);
      --muted: #9ca3af;
      --gold: #b9975b;
      --gold-dark: #6E572F;
      --gold-clear: #b9975baa;
      --green: #115740;
      --green-dark: #0B3728;
      --green-clear: #115740aa;
      --glass-blur: 10px;
      --max-width: 1200px;
    }

    html,body{
      height:100%;
      margin:0;
      font-family: serif;
      background: var(--bg);
      color: #fff;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    #app {
      height:100vh;
      width:100vw;
      position:relative;
      overflow:hidden;
    }

    /* ========== Scene / background ========== */
    #sceneContainer {
      position:absolute;
      inset:0;
      overflow:hidden;
    }
    #sceneBackground {
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      transition:opacity .4s ease;
      opacity:1;
    }

    /* Container for marker buttons that sit on top of the image */
    #floraMarkers {
      position:absolute;
      inset:0;
      pointer-events:none; /* markers enable pointer-events individually */
    }

    /* ========== Header (top overlay) ========== */
    header.app-header {
      position:absolute;
      top:0;
      left:0;
      right:0;
      padding:24px;
      background: linear-gradient(180deg, rgba(0,0,0,0.72), transparent 60%);
      pointer-events:auto;
      box-sizing:border-box;
      z-index:30;
    }

    .header-inner {
      max-width:var(--max-width);
      margin:0 auto;
      display:flex;
      align-items:center;
      justify-content:space-evenly;
      gap:16px;
    }

    .icon-btn {
      background:transparent;
      border:0;
      padding:8px;
      border-radius:8px;
      color:inherit;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
    }
    .icon-btn:hover { background: rgba(255,255,255,0.06); }

    /* Title card */
    .site-title {
      background: rgba(185, 151, 91, 0.9);
      backdrop-filter: blur(8px);
      color: #111;
      padding: 10px;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(24, 48, 40, 0.7);
      font-weight: 700;
      font-size: 32px;
      border: none;
      cursor: pointer;
      transition: transform 0.18s ease, box-shadow 0.18s ease;
      font-family: inherit;
    }

    .site-title:hover {
      transform: translateY(-6px);
      box-shadow: 0 18px 40px rgba(24, 48, 40, 0.8);
    }

    /* ========== Home screen (center) ========== */
    #homeScreen {
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background-size:cover;
      background-position:center;
      z-index:10;
    }
    #homeScreen .home-inner {
      position: absolute;
      top: 24px;
      right: 24px;
      text-align: right;
      background: rgba(24, 48, 40, 0.9);
      backdrop-filter: blur(8px);
      padding: 20px 32px;
      border-radius: 16px;
      z-index: 12;
      box-shadow: 0 8px 20px rgba(24, 48, 40, 0.7);
    }

    #homeScreen h1 {
      font-size: 96px;
      margin: 0 0 16px 0;
      font-weight: 700;
      color: #fff;
      text-shadow: 0 3px 10px rgba(0, 0, 0, 0.8);
    }

    .start-btn {
      background: var(--gold);
      border: 0;
      padding: 14px 28px;
      font-size: 18px;
      font-weight: 700;
      color: white;
      border-radius: 999px;
      display: inline-flex;
      gap: 12px;
      align-items: center;
      cursor: pointer;
      transition: transform 0.18s ease, box-shadow 0.18s ease, background 0.12s ease;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    .start-btn:hover {
      transform: translateY(-6px);
      background: var(--green);
      box-shadow: 0 18px 40px rgba(2, 6, 23, 0.6);
    }

    #home-bg-video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: fill;
      z-index: -1;
    }

    /* ========== Navigation control (center bottom) ========== */
    #navigationControls {
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      bottom:40px;
      z-index:40;
      pointer-events:auto;
    }
    .nav-panel {
      background: var(--panel-bg);
      backdrop-filter: blur(var(--glass-blur));
      border: 1px solid var(--panel-border);
      display:flex;
      gap:12px;
      padding:12px;
      border-radius:28px;
      align-items:center;
    }
    .nav-btn {
      width:56px;
      height:56px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      border-radius:10px;
      border:0;
      font-size:18px;
      cursor:pointer;
      transition: transform .18s ease;
    }
    .nav-btn:disabled {
      opacity:.45;
      cursor:not-allowed;
      transform:none;
    }
    .nav-enabled {
      background: var(--gold);
      color:white;
    }
    .nav-disabled {
      background: rgba(255,255,255,0.05);
      color:#cbd5e1;
    }
    .nav-btn:hover:not(:disabled){ transform: translateY(-4px); }

    /* ========== Location indicator (bottom right) ========== */
    #locationIndicator {
      position:absolute;
      right:24px;
      bottom:40px;
      z-index:40;
      pointer-events:auto;
    }
    .location-panel {
      background: var(--panel-bg);
      border-radius:10px;
      padding:12px 16px;
      backdrop-filter: blur(var(--glass-blur));
      border:1px solid var(--panel-border);
      min-width:180px;
    }
    .location-panel .muted { color: var(--muted); font-size:13px; margin:0 0 4px 0; }
    .location-panel .current { font-weight:600; font-size:16px; margin:0; }

    /* ========== Sidebar Menu ========== */
    #menuSidebar {
      position:fixed;
      left:0;
      top:0;
      width:320px;
      height:100%;
      z-index:45;
      background: var(--green);
      transform: translateX(-100%);
      transition: transform .28s cubic-bezier(.2,.9,.2,1);
      overflow:auto;
      backdrop-filter: blur(6px);
      border-right:1px solid rgba(255,255,255,0.03);
    }
    #menuSidebar.open { transform: translateX(0); }
    #menuSidebar .menu-inner { padding:28px; position:relative; }
    .close-menu-btn { position:absolute; right:16px; top:12px; }
    .menu-item {
      display:block;
      width:100%;
      text-align:left;
      padding:12px 10px;
      border-radius:8px;
      background:transparent;
      color:inherit;
      border:0;
      cursor:pointer;
      margin-bottom:8px;
    }
    .menu-item:hover { background: rgba(255,255,255,0.04); }

    /* ========== Map Sidebar (right) ========== */
    #mapSidebar {
      position:fixed;
      right:0;
      top:0;
      width:320px;
      height:100%;
      z-index:45;
      background: var(--green);
      transform: translateX(100%);
      transition: transform .28s cubic-bezier(.2,.9,.2,1);
      overflow:auto;
      backdrop-filter: blur(6px);
      border-left:1px solid rgba(255,255,255,0.03);
    }
    #mapSidebar.open { transform: translateX(0); }
    #mapSidebar .menu-inner { padding:28px; position:relative; }
    .location-item {
      display:block;
      width:100%;
      text-align:left;
      padding:12px 10px;
      border-radius:8px;
      background:transparent;
      color:inherit;
      border:0;
      cursor:pointer;
      margin-bottom:8px;
      transition: background 0.2s ease;
    }
    .location-item:hover { background: rgba(255,255,255,0.04); }
    .location-item.current { background: var(--gold-clear); }

    /* ========== Modal ========== */
    #floraModal, #infoModal {
      position:fixed;
      inset:0;
      background: rgba(0,0,0,0.72);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:60;
      padding:16px;
      box-sizing:border-box;
    }
    #floraModal .modal-card, #infoModal .modal-card {
      width:100%;
      max-width:900px;
      max-height:80vh;
      overflow:auto;
      background: rgba(17,24,39,0.95);
      border-radius:18px;
      padding:22px;
      border:1px solid rgba(255,255,255,0.04);
      backdrop-filter: blur(6px);
      position:relative;
      box-sizing:border-box;
      animation: fadeIn .28s ease both;
    }
    #floraModal .close-modal-btn, #infoModal .close-modal-btn { 
      position:absolute; 
      right:12px; 
      top:10px; 
    }

    #floraModal h3, #infoModal h3 { margin:0 0 6px 0; font-size:26px; }
    #floraModal .scientific { color: var(--gold); font-style:italic; margin:0 0 12px 0; }
    #floraImage {
      width:100%;
      height:50vh;
      border-radius:10px;
      background-color:#111827;
      background-size:cover;
      background-position:center;
      margin-bottom:14px;
    }

    #infoModal .info-content {
      line-height: 1.6;
      font-size: 16px;
    }

    /* ========== Flora marker styling ========== */
    .marker-button {
      position:absolute;
      width:64px;
      height:64px;
      transform:translate(-50%,-50%);
      pointer-events:auto;
      background:transparent;
      border:0;
      padding:0;
      cursor:pointer;
    }
    .marker-inner {
      position:relative;
      width:64px;
      height:64px;
    }
    .pulse-ring {
      width:64px;
      height:64px;
      border-radius:50%;
      background: #0b372875;
      position:absolute;
      left:0; top:0;
      box-sizing:border-box;
      animation: pulse-glow 2s infinite;
    }
    .marker-core {
      position:absolute;
      inset:10px;
      border-radius:50%;
      display:flex;
      align-items:center;
      justify-content:center;
      background: var(--gold);
      color:white;
      box-shadow: 0 6px 18px rgba(2,6,23,0.5);
    }
    .marker-label {
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      bottom:-34px;
      background: var(--gold);
      padding:6px 8px;
      border-radius:8px;
      font-size:18px;
      white-space:nowrap;
      box-shadow: 0 6px 20px rgba(0,0,0,0.6);
    }

    /* ========== Animations ========== */
    @keyframes fadeIn {
      from { opacity:0; transform: translateY(8px); }
      to { opacity:1; transform: translateY(0); }
    }
    @keyframes pulse-glow {
      0%,100% { box-shadow: 0 0 20px rgba(24,48, 40,0.45); transform:scale(1); }
      50% { box-shadow: 0 0 40px rgba(17,87,72,0.82); transform:scale(1.08); }
    }

    /* ========== Scrollbar ========== */
    /* Chrome/Edge/Safari */
    ::-webkit-scrollbar { width:10px; height:10px; }
    ::-webkit-scrollbar-track { background: rgba(0,0,0,0.08); }
    ::-webkit-scrollbar-thumb { background: rgba(16,185,129,0.45); border-radius:8px; }

    /* ========== Small screens ========== */
    @media (max-width:720px){
      #homeScreen h1 { font-size:30px; }
      .start-btn { padding:14px 20px; font-size:18px; }
      #menuSidebar, #mapSidebar { width:280px; }
      #floraImage { height:180px; }
    }
  </style>
</head>
<body>
<div id="app">
    <!-- Main container -->
    <div id="mainContainer" style="height:100%; width:100%; position:relative;">

        <!-- Scene / image -->
        <div id="sceneContainer">
            <img id="sceneBackground" src="" alt="Scene background" />
            <div id="floraMarkers"></div>
        </div>

        <!-- Header -->
        <header class="app-header" role="banner">
            <div class="header-inner">
                <button id="menuBtn" class="icon-btn" aria-label="Open menu">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color:inherit;">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>

                <button class="site-title" id="titleBtn" aria-label="Return to home">The J. T. Baldwin Tour</button>

                <button id="mapBtn" class="icon-btn" aria-label="Map">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color:inherit;">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Home screen (center) -->
        <div id="homeScreen">
          <video autoplay muted loop playsinline id="home-bg-video" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: -1;">
            <source src="./Pictures/dawnredwoods.MP4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
          <div class="home-inner">
            <h1>The J. T. Baldwin Tour</h1>
            <button id="startBtn" class="start-btn" aria-label="Start tour">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color:inherit;">
                <path stroke-linecap="round" stroke-linejoin="round" d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
              </svg>
              Start
            </button>
          </div>
        </div>

        <!-- Navigation controls (bottom center) -->
        <div id="navigationControls">
            <div class="nav-panel">
                <button class="nav-btn nav-disabled" data-direction="backward" aria-label="Previous" title="Previous"> 
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                    </svg>
                </button>
                <button class="nav-btn nav-disabled" data-direction="forward" aria-label="Next" title="Next">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Location indicator (bottom right) -->
        <div id="locationIndicator">
            <div class="location-panel">
                <p class="muted">Current Location</p>
                <p id="currentLocation" class="current">Loading...</p>
            </div>
        </div>

        <!-- Menu Sidebar -->
        <aside id="menuSidebar" aria-hidden="true">
            <div class="menu-inner">
                <button id="closeMenuBtn" class="icon-btn close-menu-btn" aria-label="Close menu">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>

                <h2 style="margin:0 0 18px 0; font-size:20px;">Menu</h2>
                <nav>
                    <button class="menu-item" data-info="about">About</button>
                    <button class="menu-item" data-info="arboretum">Arboretum</button>
                    <button class="menu-item" data-info="campus-tour">Campus Tour of Woody Species</button>
                </nav>
            </div>
        </aside>

        <!-- Map Sidebar -->
        <aside id="mapSidebar" aria-hidden="true">
            <div class="menu-inner">
                <button id="closeMapBtn" class="icon-btn close-menu-btn" aria-label="Close map">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>

                <h2 style="margin:0 0 18px 0; font-size:20px;">Locations</h2>
                <nav id="locationsList">
                    <!-- Location buttons will be dynamically generated -->
                </nav>
            </div>
        </aside>

        <!-- Flora Info Modal -->
        <div id="floraModal" role="dialog" aria-modal="true" aria-hidden="true">
            <div class="modal-card" style="background: var(--green-dark);">
                <button id="closeModalBtn" class="icon-btn close-modal-btn" aria-label="Close flora details">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>

                <h3 id="floraName"></h3>
                <p id="floraScientific" class="scientific"></p>

                <div id="floraDistribution" style="color:var(--muted); margin-bottom:12px;"></div>

                <div id="floraImage"></div>

                <div id="floraConservatorsNotes" style="color:var(--muted); margin-bottom:12px;"></div>
            </div>
        </div>

        <!-- Info Modal -->
        <div id="infoModal" role="dialog" aria-modal="true" aria-hidden="true">
            <div class="modal-card" style="background: var(--green-dark);">
                <button id="closeInfoModalBtn" class="icon-btn close-modal-btn" aria-label="Close info">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>

                <h3 id="infoTitle"></h3>
                <div id="infoContent" class="info-content"></div>
            </div>
        </div>

    </div>
</div>

  <!-- ========== Script ========== -->
  <script>
    // --- Tour data (kept from original file) ---
    const tourData = {
      locations: {
        'wren': {
          id: 'wren',
          name: 'Wren Building',
          background: './Pictures/wren.jpg',
          flora: [
            {
              id: 'whiteash',
              x: 27,
              y: 70,
              name: 'White Ash',
              scientific: 'Fraxinus Americana',
              family: 'Oleaceae',
              distribution: 'Virginia native; S.E. Canada to E. and Central USA; mountains of N.E. Mexico',
              conservatorsnotes: 'White ash wood is legendary for baseball bats and other wood products that require a combination of strength, lightness, and elasticity. This allows it to be manipulated with less breakage and provides energy return when it strikes a ball. Sadly, the use of its wood has declined steadily due to the emerald ash borer, an introduced insect causing massive tree mortality nearly everywhere ash trees grow. As a result, major leagues have largely turned to maple, which some claim is not as good.',
              image: './Pictures/whiteash.jpg',
            },
            {
              id: 'americanbeech',
              x: 90,
              y: 75,
              name: 'American beech',
              scientific: 'Fagus grandifolia',
              family: 'Fagaceae',
              distribution: 'Virginia native; E. Canada to E. Mexico',
              conservatorsnotes: 'One of the most common species in our local flora, the American beech can be recognized by its smooth gray bark and leaves with pronounced, regularly spaced secondary veins running to slightly toothed margins. Like its relatives, the oaks and chestnuts, beeches produce a prolific nut crop that feeds an abundance of wildlife. However, emerging diseases are putting beeches and the wildlife that depend on them at serious risk. Help keep our beech and other trees safe by not hurting the bark, which can be an entry point for disease.',
              image: './Pictures/americanbeech.jpg'
            },
            {
              id: 'sugarberry',
              x: 35,
              y: 88,
              name: 'Sugarberry',
              scientific: 'Celtis laevigata',
              family: 'Cannabaceae',
              distribution: 'Virgina native; Central and S.E. USA to N. Mexico',
              conservatorsnotes: 'The common name of this species refers to its sweet, tiny fruits, which are an important food source for birds and mammals. Native Americans have also consumed the berries raw or in dishes. However, removing the thin pulp from the large, stony seed of the fruits requires some effort for the reward. Sometimes the entire berry was ground for the food.',
              image: './Pictures/sugarberry.jpg'
            },
          ],
          connections: { forward: 'tylergardens', backward: 'williamandmary' }
        },
        'tylergardens': {
          id: 'tylergardens',
          name: 'Tyler Gardens',
          background: './Pictures/tylergardens.jpg',
          flora: [
            {
              id: 'ginkgo',
              x: 75,
              y: 25,
              name: 'Ginkgo',
              scientific: 'Ginkgo biloba',
              family: 'Ginkgoaceae',
              distribution: 'China (largely known only from cultivation; a few presumed wild populations may exist)',
              conservatorsnotes: 'Fossil trees very similar to modern-day ginkgo date back 200 million years, to the time of the dinosaurs, and are found up to approximately 2.5 million years ago. However, in 1692, Engelbert Kaempfer of the Dutch East India Company documented a Ginkgo biloba under cultivation in Japan, demonstrating that the lineage had not gone extinct. Cultivation subsequently expanded to Europe and North America. It is not surprising that individual Ginkgo biloba trees, like some distant conifer relatives, are remarkably resilient, living over 1,000 years. Recent research is untangling the developmental properties that contribute to ginkgo\'s amazing longevity and persistence.',
              image: './Pictures/ginkgo.jpg'
            },
            {
              id: 'redwood',
              x: 15,
              y: 15,
              name: 'Redwood',
              scientific: 'Sequoia sempervirens',
              family: 'Cupressaceae',
              distribution: 'SW corner of Oregon to S. Monterey Co. California',
              conservatorsnotes: 'If you\'re a Star Wars fan, you might recall the speeder bike scene on the forested moon of Endor, where Luke and Leia raced at death-defying speeds, weaving between towering trees. While the story is fictional, the forest setting is real and dominated by the species before you. These trees are coast redwoods, which date back to the Jurassic period. Once spanning much of the Northern Hemisphere, their range contracted over millions of years to a narrow strip of dense forest along the California and Oregon coasts. Fog may play a crucial ecological role in sustaining the redwoods, which coexist with a rich understory of ferns and shrubsâ€"also depicted in the film. While the coast redwood is known for having the tallest living trees on Earth, reaching up to 380 feet, a related species called the giant sequoia is renowned for its massive girth and remarkable age of its trees.',
              image: './Pictures/redwood.jpg'
            },
            {
              id: 'southernmagnolia',
              x: 35,
              y: 30,
              name: 'Southern magnolia',
              scientific: 'Magnolia grandiflora',
              family: 'Magnoliaceae',
              distribution: 'Escaped from plantings in Virginia; S.E. USA to Texas',
              conservatorsnotes: 'The southern magnolia has long been an iconic southern species, planted or pictured in thousands of landscapes and decorative items, and for good reason. Every part of this tree is stunning, from its large lemon-scented blooms to its glossy evergreen leaves, clusters of red dangling seeds, and dense pyramidal shape. The top and bottom sides of the leaves can also display an interesting color contrast. In some cultivars and high-sun plantings, the leaves produce a velvet mat of rusty hairs on the undersides, where there are numerous microscopic pores that allow the passage of oxygen and carbon dioxide. However, when the pores are open, needed water also escapes as vapor. The velvet covering can slow the evaporation of water while permitting the exchange of gases.',
              image: './Pictures/southernmagnolia.jpg'
            },
          ],
          connections: { forward: 'crimdellmeadows', backward: 'wren' }
        },
        'crimdellmeadows': {
          id: 'crimdellmeadows',
          name: 'Crim Dell Meadows',
          background: './Pictures/crimdellmeadows.jpg',
          flora: [
            {
              id: 'redmaple',
              x: 50,
              y: 20,
              name: 'Red maple',
              scientific: 'Acer rubrum',
              family: 'Aceraceae',
              distribution: 'Virginia native; E. Canada through E. USA',
              conservatorsnotes: 'We may overlook trees with small flowers as important food sources for pollinators, but some, like the red maple, can offer abundant resources, especially in early spring. When selecting a maple to plant, avoid Norway maples and hybrids. The former can be invasive, and the latter may not provide sufficient food for pollinators.',
              image: './Pictures/redmaple.jpg'
            },
            {
              id: 'dogwood',
              x: 10,
              y: 60,
              name: 'Flowering dogwood',
              scientific: 'Benthamidia florida',
              family: 'Cornaceae',
              distribution: 'Virginia native; S.E. Canada to Mexico',
              conservatorsnotes: 'A beautiful feature of the flowering dogwood is its display of four showy white bracts, which are modified leaves. These bracts surround a cluster of tiny flowers in the center and help attract pollinators. Not all dogwoods have such bracts and may differ in other ways, such as having blue or white fruit instead of red. Several species of dogwood can be found locally, and their fruits are a very important food source for birds.',
              image: './Pictures/dogwood.jpg'
            },
            {
              id: 'dawnredwood',
              x: 40,
              y: 60,
              name: 'Dawn redwood',
              scientific: 'Metasequoia glyptostroboides',
              family: 'Cupressaceae',
              distribution: 'South-central and S.E. China',
              conservatorsnotes: 'Welcome back to North America! Once known only as a widely-distributed fossil with a site as close to us as New York state, the dawn redwood was believed to be extinct until it was discovered alive in Chinaâ€™s Hubei province in the early 1940â€™s. Subsequently, wild-collected seed was sent to the Arnold Arboretum in Boston to be distributed to select botanical gardens around the world for study, education, and conservation. Former William & Mary biology professor J.T. Baldwin happened to be visiting the National Botanical Garden of Belgium during the 1948 distribution and obtained seeds. He shipped them back to William & Mary where they have grown into these spectacular and scientifically valuable specimens that are progeny from wild trees.',
              image: './Pictures/dawnredwood.jpg'
            },
            {
              id: 'tulippoplar',
              x: 95,
              y: 60,
              name: 'Tulip poplar',
              scientific: 'Liriodendron tulipifera',
              family: 'Magnoliaceae',
              distribution: 'Virginia native; E. USA',
              conservatorsnotes: 'During the Civil War, two lovers died here at this spot in each otherâ€™s arms. It is said that if you and your partner hug each one of these trees, you will stay together forever.',
              image: './Pictures/tulippoplar.jpg'
            },
          ],
          connections: { forward: 'crimdell', backward: 'tylergardens' }
        },
        'crimdell': {
          id: 'crimdell',
          name: 'Crim Dell',
          background: './Pictures/crimdell.jpg',
          flora: [
            {
              id: 'coralberry',
              x: 55,
              y: 70,
              name: 'Coralberry',
              scientific: 'Symphoricarpos orbiculatus',
              family: 'Caprifoliaceae',
              distribution: 'Virginia native; E. and Central USA',
              conservatorsnotes: 'This small, mound-shaped, deciduous shrub with shredding bark on older wood and brown to purplish branchlets covered with short hairs visible under a 10x hand lens, usually grows to 4 ft. but can reach 6 ft. Its smooth, dull green leaves are opposite and roughly oval, tapering about equally to tip and base, up to 2 inches long but often less than 1 inch, with smooth, turned down margins and a rounded or broadly pointed tip. The greenish-white flower clusters are not as showy as the clusters of coral-pink to purple fruit up to 1/4 inch in diameter which remain on the plant through winter.',
              image: './Pictures/coralberry.jpeg'
            },
            {
              id: 'americanbeech',
              x: 10,
              y: 70,
              name: 'American beech',
              scientific: 'Fagus grandifolia',
              family: 'Fagaceae',
              distribution: 'Virginia native; E. Canada to E. Mexico',
              conservatorsnotes: 'One of the most common species in our local flora, the American beech can be recognized by its smooth gray bark and leaves with pronounced, regularly spaced secondary veins running to slightly toothed margins. Like its relatives, the oaks and chestnuts, beeches produce a prolific nut crop that feeds an abundance of wildlife. However, emerging diseases are putting beeches and the wildlife that depend on them at serious risk. Help keep our beech and other trees safe by not hurting the bark, which can be an entry point for disease.',
              image: './Pictures/americanbeech.jpg'
            },
            {
              id: 'whiteoak',
              x: 75,
              y: 15,
              name: 'White oak',
              scientific: 'Quercus alba',
              family: 'Fagaceae',
              distribution: 'Virginia native; S.E. Canada to Central and E. USA',
              conservatorsnotes: 'Among the 27 oak species found in Virginia, white oak is the most common. It is a stately, long-lived tree that attains massive crowns in the open. It produces strong wood, abundant food for wildlife, and important products for humans. These products include wood for cabinetry, flooring, and special uses such as barrels which impart an â€œoakyâ€ flavor to wine and bourbon. Historically, acorns from this species were also an important food source for Native Americans, who used the kernels to produce flour. This process requires a lengthy procedure to remove tannins, which would otherwise impart an unpalatable bitterness to the product.',
              image: './Pictures/whiteoak.jpg'
            },
          ],
          connections: { forward: 'mcglothlinstreet', backward: 'crimdellmeadows' }
        },
        'mcglothlinstreet': {
          id: 'mcglothlinstreet',
          name: 'McGlothlin-Street Hall',
          background: './Pictures/mcglothlinstreet.jpg',
          flora: [
            {
              id: 'japaneseplumyew',
              x: 57,
              y: 40,
              name: 'Japanese plum yew',
              scientific: 'Cephalotaxus harringtonii',
              family: 'Cephalotaxaceae',
              distribution: 'Japan, N.E. China, and Korea',
              conservatorsnotes: 'Once part of the indigenous flora of both North America and Asia during prehistoric times, species of the genus Cephalotaxus are now restricted to Asia, with a primary center of distribution in China. Despite their ecological and horticultural value, these species remain poorly understood and are becoming increasingly rare. One example is this spreading, low-growing form of the Japanese plum yew, which thrives in shadeâ€"a trait uncommon among many other evergreen plants. In further reading, you may encounter an earlier, grammatically incorrect spelling of C. harringtonii as C. harringtonia.',
              image: './Pictures/japaneseplumyew.jpg'
            },
            {
              id: 'sweetbay',
              x: 95,
              y: 50,
              name: 'Sweetbay',
              scientific: 'Magnolia virginiana',
              family: 'Magnoliaceae',
              distribution: 'Virginia native; E. USA to Texas and Cuba',
              conservatorsnotes: 'Most of us are familiar with the southern magnolia, but did you know that sweetbay is the most common naturally-occurring magnolia of Virginiaâ€™s Coastal Plain? Sweetbay features smaller and more delicate leaves, flowers, and fruits, but stands out with its waxy-white leaf undersides that contrast with its semi-evergreen foliageâ€"an especially beautiful feature in the wind. Unlike most other magnolias, sweetbay is tolerant of continuously wet sites (in full sun to partial shade).',
              image: './Pictures/sweetbay.jpg'
            },
          ],
          connections: { forward: 'barrett', backward: 'crimdell' }
        },
        'barrett': {
          id: 'barrett',
          name: 'Barrett Hall',
          background: './Pictures/barrett.jpg',
          flora: [
            {
              id: 'japanesecedar',
              x: 33,
              y: 80,
              name: 'Japanese cedar',
              scientific: 'Cryptomeria japonica',
              family: 'Cupressaceae',
              distribution: 'S. China, Central and S. Japan',
              conservatorsnotes: 'Much of the exotic plant diversity on campus was introduced by former W&M biology professor J.T. Baldwin (circa 1946-1974), who believed that an arboretum was as important to a college as a library. Baldwin traveled the world, acquiring plants to grow on campus for teaching and research. One of his keen interests was Japanese cedar, an important species in traditional Asian medicine. Recent chemical investigations of this species have discovered novel compounds with potential for the treatment of several human diseases.',
              image: './Pictures/japanesecedar.jpg'
            },
            {
              id: 'japanesecedar',
              x: 70,
              y: 80,
              name: 'Japanese cedar',
              scientific: 'Cryptomeria japonica',
              family: 'Cupressaceae',
              distribution: 'S. China, Central and S. Japan',
              conservatorsnotes: 'Much of the exotic plant diversity on campus was introduced by former W&M biology professor J.T. Baldwin (circa 1946-1974), who believed that an arboretum was as important to a college as a library. Baldwin traveled the world, acquiring plants to grow on campus for teaching and research. One of his keen interests was Japanese cedar, an important species in traditional Asian medicine. Recent chemical investigations of this species have discovered novel compounds with potential for the treatment of several human diseases.',
              image: './Pictures/japanesecedar.jpg'
            },
            {
              id: 'chinafir',
              x: 95,
              y: 20,
              name: 'China fir',
              scientific: 'Cunninghamia lanceolata',
              family: 'Cupressaceae',
              distribution: 'South-central and S.E. China',
              conservatorsnotes: 'The China fir is one of the most important trees for the ecology and economy of China, particularly in regions south of the Yangtze River. Its fast growth, easily worked wood, and strong resistance to rot and termites have fostered widespread planting and use in China. New variants with superior properties such as â€œred heartâ€ are still being discovered and actively studied in laboratories, which could lead to significant improvement of wood products.',
              image: './Pictures/chinafir.jpg'
            },
          ],
          connections: { forward: 'reveleygarden', backward: 'mcglothlinstreet' }
        },
        'reveleygarden': {
          id: 'reveleygarden',
          name: 'Reveley Garden',
          background: './Pictures/reveleygarden.jpg',
          flora: [
            {
              id: 'whitemulberry',
              x: 70,
              y: 55,
              name: 'White mulberry',
              scientific: 'Morus alba',
              family: 'Moraceae',
              distribution: 'USA and Europe',
              conservatorsnotes: 'This tree was brought during colonial times along with silk worms in an attempt to begin a silk trade. However, all the silk worms died and were unable to produce silk. So, it became a staple tree here on campus. In the 1980s, a storm ravaged the campus and the tree became splayed out and broken. The administration wanted to cut it down, but the campus arborist Matthew Trowbridge insisted on keeping it and instead installed a brick buttress to prevent further erosion.',
              image: './Pictures/whitemulberry.jpg'
            },
            {
              id: 'yewplumpine',
              x: 5,
              y: 40,
              name: 'Yew plum pine',
              scientific: 'Podocarpus macrophyllus',
              family: 'Podocarpaceae',
              distribution: 'South-central and S.E. China, Taiwan, Japan, and Myanmar',
              conservatorsnotes: 'A quick glance at this shrub might suggest that it will produce flowers, but it will not. This species is a gymnosperm, which translates to "naked seed," referring to the fact that seeds are not produced in fruits from flowers but in cones, modified cones, or directly on the branch. Well-known gymnosperm families in our Williamsburg area include Pinaceae (true pines) and Cupressaceae (cypress and cedar), which all hold seeds in cones or modified cones. Can you spot the seeds on this plant? You might have to look hard.',
              image: './Pictures/yewplumpine.jpg'
            },
          ],
          connections: { forward: 'adamsgarden', backward: 'barrett' }
        },
        'adamsgarden': {
          id: 'adamsgarden',
          name: 'Adams Garden',
          background: './Pictures/adamsgarden.jpg',
          flora: [
            {
              id: 'loquat',
              x: 17,
              y: 50,
              name: 'Loquat',
              scientific: 'Eriobotrya japonica',
              family: 'Rosaceae',
              distribution: 'S. China and Japan',
              conservatorsnotes: 'The loquat is monoecious, meaning male and female flowers grow on the same tree. The fruit can be used like any other stone fruit, eaten fresh or baked into desserts. They also have a high pectin content that makes them good for jams and jellies',
              image: './Pictures/loquat.jpg'
            },
            {
              id: 'bluespruce',
              x: 65,
              y: 60,
              name: 'Blue spruce',
              scientific: 'Picea pungens',
              family: 'Pinaceae',
              distribution: 'Western USA',
              conservatorsnotes: 'Blue spruce in the wild can grow up to 50m, but those in cultivation (like this one) don\'t often grow as tall. It also prefers cool and dry climates, so the one planted here will likely never reach its wild siblings\' height',
              image: './Pictures/bluespruce.jpg'
            },
            {
              id: 'crysanthemum',
              x: 50,
              y: 75,
              name: 'Chrysanthemum',
              scientific: 'Chrysanthemum indicum',
              family: 'Asteraceae',
              distribution: 'East Asia, northeastern Europe',
              conservatorsnotes: 'Chrysanthemums, which are rotated with other seasonal flowers, surround the plaque in memory of Gregory S. Adams \'81.',
              image: './Pictures/chrysanthemum.jpg'
            },
          ],
          connections: { forward: 'williamandmary', backward: 'reveleygarden' }
        },
        'williamandmary': {
          id: 'williamandmary',
          name: 'William & Mary',
          background: './Pictures/williamandmary.png',
          flora: [
            {
              id: 'windmillpalm',
              x: 77,
              y: 60,
              name: 'Chinese windmill palm',
              scientific: 'Trachycarpus fortunei',
              family: 'Arecaceae',
              distribution: 'China, Japan, Myanmar, and India',
              conservatorsnotes: 'The Chinese windmill palm, compared to many palms, is relatively cold hardy. Some narrow definitions of "trees" do not include palms, since they are monocots like grasses rather than dicots like most other trees.',
              image: './Pictures/windmillpalm.jpg'
            },
            {
              id: 'weepingwillow',
              x: 64,
              y: 43,
              name: 'Weeping willow',
              scientific: 'Salix babylonica',
              family: 'Salicaceae',
              distribution: 'China, Korea, Mongoloa, and Japan',
              conservatorsnotes: 'It is named \"babylonica\" because Linnaeus mistakenly thought it was from Babylon. Unlike Viginia native willows, which prefer streambanks and wetter areas, Salix babylonica grow in drier areas.',
              image: './Pictures/weepingwillow.jpg'
            },
            {
              id: 'osmanthus',
              x: 42,
              y: 65,
              name: 'Fortune\'s osmanthus',
              scientific: 'Osmanthus x fortunei',
              family: 'Oleaceae',
              distribution: 'Japan',
              conservatorsnotes: '',
              image: './Pictures/osmanthus.jpg'
            },
            {
              id: 'americansycamore',
              x: 84,
              y: 47,
              name: 'American Sycamore',
              scientific: 'Platanus occidentalis',
              family: 'Platanaceae',
              distribution: 'Virginia native; North-central and E. USA to E. Texas',
              conservatorsnotes: 'One of the most distinctive and beautiful features of this species is the naturally exfoliating bark on young wood, which produces a mottled look of white, green, tan, and brown, varying across different trees. In areas of older wood (found at the base of the tree), the bark eventually loses this quality and takes on a more conventional appearance. The bark of a tree is like a protective skin with many functions, including the exchange of gases to enable cells in the trunk to live. It also provides waterproofing, insulation, disease protection, and, in this species, even photosynthesis. The latter can help to explain why the bark is green and peels on young upper wood (exposing young fresh tissue for photosynthesis), as opposed to the non-photosynthetic rough bark on old lower wood.',
              image: './Pictures/americansycamore.jpg'
            },
          ],
          connections: { forward: 'wren', backward: 'adamsgarden' }
        },
      },
      startLocation: 'wren'
    };

    // Info content for modal displays
    const infoContent = {
      about: {
        title: 'About the J. T. Baldwin Tour',
        content: `
          <p>The J. T. Baldwin Tour is a virtual version of the tours that the esteemed Dr. Baldwin gave as a professor from the 1940s to the 1970s.
          
          John T. Baldwin Jr. was a graduate from William & Mary who went on to study at the University of Virginia and Cornell University before returning to Williamsburg as a faculty member in 1937.

          Over the course of almost 30 years, Professor Baldwin traveled the globe conducting research, and he often sent back seed samples of exotic plants during his journeys.

          The Professor loved his collection, and valued it for his student's education as much as the library. He often gave tours of the campus fauna, showcasing its diversity.</p>

          <p> After Dr. Baldwin's passing in 1974, many curators, including Professor Mathes and Professor Case, have upheld his work and legacy through multiple publications and a campus Arboretum.

          Many of Baldwin's flora have thrived in Williamsburg for nearly 75 years; this Tour aims to sustain the passion for campus flora that J. T. Baldwin championed for years to come.</p>
          
          <img src="./Pictures/baldwin.png" alt="Professor Baldwin" style="max-width: 100%; height: auto;">

          <p> A special thanks to Prof. Mathes and Prof. Case for keeping this collection for over 50 years, and to W&M SEAC, including Grace Parker, who still gives tours like Baldwin did all those years ago.
          `
      },
      arboretum: {
        title: 'The William & Mary Arboretum',
        content: `
          <p>William & Mary's Arboretum has been upheld by Professor Martha Case. This tour would not be possible without her efforts to document hundreds of fauna around campus'</p>
          
          <p>The arboretum includes both native Virginia species and exotic plants from Asia, Europe, and other regions. Each specimen serves educational and research purposes, providing students and faculty with hands-on learning opportunities in botany, ecology, and conservation.</p>
        `
      },
      'campus-tour': {
        title: 'Campus Tour of Woody Species',
        content: `
          <p>The Campus Tour of Woody Species is the Biology department's effort to keep Baldwin's tours alive. It is a self-guided in-person tour that highlights "The Baldwin Memorial Collection of Woody Species"</p>
          
          <p>The tour includes thirteen distinct locations, each featuring unique plant communities and individual specimens of particular scientific or historical interest. From the iconic Wren Building to the serene Crim Dell, each stop offers insights into plant biology, ecology, and human cultural connections to the natural world.</p>
        
          <p>Along with the Arboretum, this project would not have been possible without the efforts of the Biology department to keep the Campus Tour of Woody Species as close to possible as Baldwin's original route.</p>
        `
      }
    };

    // --- App state and methods ---
    class TourApp {
      constructor(){
        this.currentLocation = null;
        this.isMenuOpen = false;
        this.isMapOpen = false;
        this.init();
      }

      init(){
        this.setupEventListeners();
        this.populateLocationsList();
        this.showHomeScreen();
      }

      setupEventListeners(){
        // Start
        document.getElementById('startBtn').addEventListener('click', () => this.startTour());

        // Title button to return home
        document.getElementById('titleBtn').addEventListener('click', () => this.returnHome());

        // Menu open/close
        document.getElementById('menuBtn').addEventListener('click', () => this.toggleMenu());
        document.getElementById('closeMenuBtn').addEventListener('click', () => this.toggleMenu());

        // Map open/close
        document.getElementById('mapBtn').addEventListener('click', () => this.toggleMap());
        document.getElementById('closeMapBtn').addEventListener('click', () => this.toggleMap());

        // Menu items - info modals
        document.querySelectorAll('.menu-item[data-info]').forEach(item => {
          item.addEventListener('click', (e) => {
            const infoType = e.target.dataset.info;
            this.showInfoModal(infoType);
            this.toggleMenu(); // Close menu after selection
          });
        });

        // Navigation buttons
        document.querySelectorAll('.nav-btn').forEach(btn => {
          btn.addEventListener('click', (e) => {
            const direction = e.currentTarget.dataset.direction;
            this.navigate(direction);
          });
        });

        // Flora modal
        document.getElementById('closeModalBtn').addEventListener('click', () => this.closeFloraModal());
        document.getElementById('floraModal').addEventListener('click', (e) => {
          if (e.target.id === 'floraModal') this.closeFloraModal();
        });

        // Info modal
        document.getElementById('closeInfoModalBtn').addEventListener('click', () => this.closeInfoModal());
        document.getElementById('infoModal').addEventListener('click', (e) => {
          if (e.target.id === 'infoModal') this.closeInfoModal();
        });

        // Close menus if clicked outside on small screens
        document.addEventListener('click', (e) => {
          const menuSidebar = document.getElementById('menuSidebar');
          const mapSidebar = document.getElementById('mapSidebar');
          
          if (!menuSidebar.contains(e.target) && !document.getElementById('menuBtn').contains(e.target) && this.isMenuOpen) {
            this.toggleMenu();
          }
          
          if (!mapSidebar.contains(e.target) && !document.getElementById('mapBtn').contains(e.target) && this.isMapOpen) {
            this.toggleMap();
          }
        });
      }

      populateLocationsList(){
        const locationsList = document.getElementById('locationsList');
        locationsList.innerHTML = '';

        Object.values(tourData.locations).forEach(location => {
          const button = document.createElement('button');
          button.className = 'location-item';
          button.textContent = location.name;
          button.addEventListener('click', () => {
            this.loadLocation(location.id);
            this.toggleMap(); // Close map after selection
          });
          locationsList.appendChild(button);
        });
      }

      updateLocationsList(){
        document.querySelectorAll('.location-item').forEach(item => {
          if (item.textContent === tourData.locations[this.currentLocation]?.name) {
            item.classList.add('current');
          } else {
            item.classList.remove('current');
          }
        });
      }

      showHomeScreen(){
        document.getElementById('homeScreen').style.display = 'flex';
        document.getElementById('navigationControls').style.display = 'none';
        document.getElementById('locationIndicator').style.display = 'none';
        document.getElementById('sceneContainer').style.display = 'none';
        this.currentLocation = null;
        this.updateLocationsList();
        this.toggleHeader();
      }

      returnHome(){
        this.showHomeScreen();
      }

      startTour(){
        document.getElementById('homeScreen').style.display = 'none';
        document.getElementById('navigationControls').style.display = 'block';
        document.getElementById('locationIndicator').style.display = 'block';
        document.getElementById('sceneContainer').style.display = 'block';

        this.loadLocation(tourData.startLocation);
        this.toggleHeader();
      }

      loadLocation(locationId){
        const location = tourData.locations[locationId];
        if (!location) return;
        this.currentLocation = locationId;

        // Preload the image
        const img = new Image();
        img.onload = () => {
          // Once image is loaded, fade swap background and render markers simultaneously
          const sceneBackground = document.getElementById('sceneBackground');
          sceneBackground.style.opacity = '0';
          setTimeout(() => {
            sceneBackground.src = location.background;
            sceneBackground.style.opacity = '1';
            // Render flora markers at the same time as image loads
            this.renderFloraMarkers(location.flora);
          }, 300);
        };
        img.src = location.background;

        // Update location text
        document.getElementById('currentLocation').textContent = location.name;

        // Update navigation availability
        this.updateNavigationButtons(location.connections);

        // Update locations list to show current
        this.updateLocationsList();
      }

      renderFloraMarkers(floraList){
        const container = document.getElementById('floraMarkers');
        container.innerHTML = ''; // clear

        floraList.forEach(flora => {
          const marker = document.createElement('button');
          marker.className = 'marker-button';
          marker.style.left = flora.x + '%';
          marker.style.top = flora.y + '%';
          marker.setAttribute('aria-label', flora.name);

          // Compose inner HTML with our CSS classes
          marker.innerHTML = `
            <div class="marker-inner">
              <div class="pulse-ring"></div>
              <div class="marker-core" title="${flora.name}">
                <!-- icon -->
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color:inherit;">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
              </div>
              <div class="marker-label">${flora.name}</div>
            </div>
          `;

          // Show info when clicked
          marker.addEventListener('click', (evt) => {
            evt.stopPropagation();
            this.showFloraInfo(flora);
          });

          container.appendChild(marker);
        });
      }

      updateNavigationButtons(connections){
        const buttons = document.querySelectorAll('.nav-btn');
        buttons.forEach(btn => {
          const direction = btn.dataset.direction;
          if (connections[direction]) {
            btn.disabled = false;
            btn.classList.remove('nav-disabled');
            btn.classList.add('nav-enabled');
          } else {
            btn.disabled = true;
            btn.classList.remove('nav-enabled');
            btn.classList.add('nav-disabled');
          }
        });
      }

      navigate(direction){
        const location = tourData.locations[this.currentLocation];
        const nextLocationId = location && location.connections ? location.connections[direction] : null;
        if (nextLocationId) {
          this.loadLocation(nextLocationId);
        }
      }

      showFloraInfo(flora){
        document.getElementById('floraName').textContent = flora.name;
        document.getElementById('floraScientific').textContent = flora.scientific;
        document.getElementById('floraDistribution').textContent = "Distribution: " + flora.distribution;
        document.getElementById('floraConservatorsNotes').textContent = "Conservator's Notes: " + flora.conservatorsnotes;

        // Set image
        const imageDiv = document.getElementById('floraImage');
        imageDiv.style.backgroundImage = `url('${flora.image}')`;

        // Show modal
        const modal = document.getElementById('floraModal');
        modal.style.display = 'flex';
        modal.setAttribute('aria-hidden','false');
      }

      closeFloraModal(){
        const modal = document.getElementById('floraModal');
        modal.style.display = 'none';
        modal.setAttribute('aria-hidden','true');
      }

      showInfoModal(infoType){
        const info = infoContent[infoType];
        if (!info) return;

        document.getElementById('infoTitle').textContent = info.title;
        document.getElementById('infoContent').innerHTML = info.content;

        const modal = document.getElementById('infoModal');
        modal.style.display = 'flex';
        modal.setAttribute('aria-hidden','false');
      }

      closeInfoModal(){
        const modal = document.getElementById('infoModal');
        modal.style.display = 'none';
        modal.setAttribute('aria-hidden','true');
      }

      toggleMenu(){
        const sidebar = document.getElementById('menuSidebar');
        this.isMenuOpen = !this.isMenuOpen;
        if (this.isMenuOpen) {
          sidebar.classList.add('open');
          sidebar.setAttribute('aria-hidden','false');
        } else {
          sidebar.classList.remove('open');
          sidebar.setAttribute('aria-hidden','true');
        }
      }

      toggleMap(){
        const sidebar = document.getElementById('mapSidebar');
        this.isMapOpen = !this.isMapOpen;
        if (this.isMapOpen) {
          sidebar.classList.add('open');
          sidebar.setAttribute('aria-hidden','false');
        } else {
          sidebar.classList.remove('open');
          sidebar.setAttribute('aria-hidden','true');
        }
      }

      toggleHeader() {
        const homeScreenVisible = document.getElementById('homeScreen').style.display !== 'none';
        const header = document.querySelector('header.app-header');
        if (homeScreenVisible) {
          header.style.display = 'none'; // Hide header on home screen
        } else {
          header.style.display = 'block'; // Show header otherwise
        }
      }
    }

    // Initialize when DOM ready
    document.addEventListener('DOMContentLoaded', () => {
      new TourApp();
    });
  </script>
</body>
</html>